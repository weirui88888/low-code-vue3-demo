# 黄油会员页面重构记录

## 背景

1.目前黄油相机会员页面进过多次活动迭代后，代码中耦合了各种逻辑，且有的下线活动的代码或者无用的代码堆积，导致代码体积朝着不断增长的方向发展 2.项目经过多人迭代，编码风格各异，且存在很多不规范的地方，借此机会进行修复和统一 3.本次重构计划采用 vue 默认 3 版本进行，相对应的构建工具采用 vite 实现，可以提高开发效率和构建效率 4.计划随着本次重构，加深对于项目代码业务的理解，从而推进关于定制化会员页的功能，解放开发者双手

## 难点

从 vue2 过度到 vue3，由于框架整体风格突变，需要开发者具备一定的学习和实践能力，同时关于构建工具 vite 的配置，需要进行摸索实践

- vue3 使用
- vite 工程配置
- 旧业务的沿用与推翻重构
  目标
  基于理想化的目标，应实现以下几点
- 重构不影响原有的任何业务逻辑，毕竟该页面访问量大，且直接影响用户支付
- 添加项目工程化配置，降低开发者开发心智负担，形成体系化的开发规范，提高编程质量
- 对于一些技术细节进行风格转变，见细节章节
- 原有的静态部署+cdn 依然沿用旧的逻辑

## 细节

本着一体化的思路，希望能够实现以下几点，从而可以使得会员页项目最大程度的解耦其他插件和 api

1. api 进行重构，实现一套独立的 api 机制（根据环境变量进行区分）
2. v5api 业务抽象和实现
3. css 样式收拢
4. 外部组件和插件收拢和重构
5. 。。。

## 过程

该章节主要用来一句话阐述做了重构过程中的哪些工作，便于后期回顾
